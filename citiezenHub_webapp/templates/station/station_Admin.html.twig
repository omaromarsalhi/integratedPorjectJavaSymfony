{% extends 'index.html.twig' %}


{% block body %}
    <script>
        var phoenixIsRTL = window.config.config.phoenixIsRTL;
        if (phoenixIsRTL) {
            var linkDefault = document.getElementById('style-default');
            var userLinkDefault = document.getElementById('user-style-default');
            linkDefault.setAttribute('disabled', true);
            userLinkDefault.setAttribute('disabled', true);
            document.querySelector('html').setAttribute('dir', 'rtl');
        } else {
            var linkRTL = document.getElementById('style-rtl');
            var userLinkRTL = document.getElementById('user-style-rtl');
            linkRTL.setAttribute('disabled', true);
            userLinkRTL.setAttribute('disabled', true);
        }
    </script>
    <script>
        var navbarStyle = window.config.config.phoenixNavbarStyle;
        if (navbarStyle && navbarStyle !== 'transparent') {
            document.querySelector('body').classList.add(`navbar-${navbarStyle}`);
        }
    </script>
    <script>
        var navbarTopShape = window.config.config.phoenixNavbarTopShape;
        var navbarPosition = window.config.config.phoenixNavbarPosition;
        var body = document.querySelector('body');
        var navbarDefault = document.querySelector('#navbarDefault');
        var navbarTop = document.querySelector('#navbarTop');
        var topNavSlim = document.querySelector('#topNavSlim');
        var navbarTopSlim = document.querySelector('#navbarTopSlim');
        var navbarCombo = document.querySelector('#navbarCombo');
        var navbarComboSlim = document.querySelector('#navbarComboSlim');
        var dualNav = document.querySelector('#dualNav');

        var documentElement = document.documentElement;
        var navbarVertical = document.querySelector('.navbar-vertical');

        if (navbarPosition === 'dual-nav') {
            topNavSlim.remove();
            navbarTop.remove();
            navbarVertical.remove();
            navbarTopSlim.remove();
            navbarCombo.remove();
            navbarComboSlim.remove();
            navbarDefault.remove();
            dualNav.removeAttribute('style');
            document.documentElement.setAttribute('data-navigation-type', 'dual');

        } else if (navbarTopShape === 'slim' && navbarPosition === 'vertical') {
            navbarDefault.remove();
            navbarTop.remove();
            navbarTopSlim.remove();
            navbarCombo.remove();
            navbarComboSlim.remove();
            topNavSlim.style.display = 'block';
            navbarVertical.style.display = 'inline-block';
            document.documentElement.setAttribute('data-navbar-horizontal-shape', 'slim');

        } else if (navbarTopShape === 'slim' && navbarPosition === 'horizontal') {
            navbarDefault.remove();
            navbarVertical.remove();
            navbarTop.remove();
            topNavSlim.remove();
            navbarCombo.remove();
            navbarComboSlim.remove();
            navbarTopSlim.removeAttribute('style');
            document.documentElement.setAttribute('data-navbar-horizontal-shape', 'slim');
        } else if (navbarTopShape === 'slim' && navbarPosition === 'combo') {
            navbarDefault.remove();
            navbarTop.remove();
            topNavSlim.remove();
            navbarCombo.remove();
            navbarTopSlim.remove();
            navbarComboSlim.removeAttribute('style');
            navbarVertical.removeAttribute('style');
            document.documentElement.setAttribute('data-navbar-horizontal-shape', 'slim');
        } else if (navbarTopShape === 'default' && navbarPosition === 'horizontal') {
            navbarDefault.remove();
            topNavSlim.remove();
            navbarVertical.remove();
            navbarTopSlim.remove();
            navbarCombo.remove();
            navbarComboSlim.remove();
            navbarTop.removeAttribute('style');
            document.documentElement.setAttribute('data-navigation-type', 'horizontal');
        } else if (navbarTopShape === 'default' && navbarPosition === 'combo') {
            topNavSlim.remove();
            navbarTop.remove();
            navbarTopSlim.remove();
            navbarDefault.remove();
            navbarComboSlim.remove();
            navbarCombo.removeAttribute('style');
            navbarVertical.removeAttribute('style');
            document.documentElement.setAttribute('data-navigation-type', 'combo');


        } else {
            topNavSlim.remove();
            navbarTop.remove();
            navbarTopSlim.remove();
            navbarCombo.remove();
            navbarComboSlim.remove();
            navbarDefault.removeAttribute('style');
            navbarVertical.removeAttribute('style');
        }

        var navbarTopStyle = window.config.config.phoenixNavbarTopStyle;
        var navbarTop = document.querySelector('.navbar-top');
        if (navbarTopStyle === 'darker') {
            navbarTop.setAttribute('data-navbar-appearance', 'darker');
        }

        var navbarVerticalStyle = window.config.config.phoenixNavbarVerticalStyle;
        var navbarVertical = document.querySelector('.navbar-vertical');
        if (navbarVerticalStyle === 'darker') {
            navbarVertical.setAttribute('data-navbar-appearance', 'darker');
        }
    </script>
    <div class="content">
        <nav class="mb-2" aria-label="breadcrumb">

        </nav>
        <div class="mb-9">
            <div class="row g-3 mb-4">
                <div class="col-auto">
                    <h2 class="mb-0">Stations</h2>
                </div>
            </div>

            <div id="products"
                 data-list='{"valueNames":["product","price","category","tags","vendor","time"],"page":10,"pagination":true}'>
                <div class="mb-4">
                    <div class="d-flex flex-wrap gap-3">
                        <div class="search-box">
                            <form class="position-relative" data-bs-toggle="search" data-bs-display="static"><input
                                        class="form-control search-input search" type="search"
                                        placeholder="Search products"
                                        aria-label="Search"/>
                                <span class="fas fa-search search-box-icon"></span>
                            </form>
                        </div>

                        <div class="ms-xxl-auto">
                            <button class="btn btn-primary me-4" type="button" data-bs-toggle="modal"
                                    data-bs-target="#addDealModal" aria-haspopup="true" aria-expanded="false"
                                    data-bs-reference="parent"><span class="fas fa-plus me-2"></span>Add Station
                            </button>

                        </div>
                    </div>
                </div>
                <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-body-emphasis border-top border-bottom border-translucent position-relative top-1">

                    <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-body-emphasis pt-7 border-y">


                        <div data-list='{"valueNames":["product","customer","rating","review","time"],"page":6}'>

                            <div class="table-responsive mx-n1 px-1 scrollbar">
                                <table class="table fs-9 mb-0 border-top border-translucent">
                                    <thead>
                                    <tr>
                                        {#         <th class="white-space-nowrap fs-9 ps-0 align-middle"> #}
                                        {#          <div class="form-check mb-0 fs-8"><input class="form-check-input" id="checkbox-bulk-reviews-select" type="checkbox" data-bulk-select='{"body":"table-latest-review-body"}' /></div> #}
                                        {#         </th> #}
                                        <th class="sort white-space-nowrap align-middle" scope="col"
                                            style="min-width:360px;" data-sort="product">NOM STATION
                                        </th>
                                        <th class="sort align-middle" scope="col" data-sort="customer"
                                            style="min-width:200px;">IMAGE
                                        </th>
                                        <th class="sort align-middle" scope="col" data-sort="rating"
                                            style="min-width:110px;">Type Vehicule
                                        </th>
                                        <th class="sort align-middle" scope="col" style="max-width:350px;"
                                            data-sort="review">Address
                                        </th>

                                        <th class=" text-end align-middle" scope="col" ></th>
                                        <th class="sort text-end pe-0 align-middle" scope="col"></th>
                                    </tr>
                                    </thead>

                                    <tbody class="list" id="table-latest-review-body">
                                    {% for station in stationlist %}


                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static " id="station-{{station.id}}">

                                            <td class="align-middle product white-space-nowrap"><a class="fw-semibold"
                                                                                                   href="">{{ station.NomStation }}</a>
                                            </td>
                                            <td class="align-middle customer white-space-nowrap"><a
                                                        class="d-flex align-items-center text-body">
                                                    <div class="avatar avatar-l"><img class="rounded-circle"
                                                                                      data-gallery="gallery-posts-1"
                                                                                      src="/usersImg/{{station.imagestation }}"
                                                                                      alt=""/></div>
                                                </a></td>
                                            <td class="align-middle rating white-space-nowrap fs-10">
                                                <h6 class="fs-9 fw-semibold text-body-highlight mb-0">{{ station.TypeVehicule }}</h6>
                                            </td>
                                            <td class="align-middle review" style="min-width:350px;">
                                                <h6 class="fs-9 fw-semibold text-body-highlight mb-0">{{ station.AddressStation }}</h6>
                                            </td>

                                            <td class="align-middle text-end time white-space-nowrap">
                                                <div class="hover-hide">
                                                    <h6 class="text-body-highlight mb-0">manege Data</h6>
                                                </div>
                                            </td>
                                            <td class="align-middle white-space-nowrap text-end pe-0">
                                                <div >
                                                    <div class="hover-actions">
                                                        <button class="btn btn-sm btn-phoenix-secondary me-1 fs-10"
                                                                onclick="showModifierPopup('{{ station.id }}','{{ station.NomStation }}','{{ station.AddressStation }}','{{ station.imagestation }}','{{ station.TypeVehicule }}')">
                                                            <span class=" fas fa-clipboard"></span>
                                                        </button>
                                                        <button  class="btn btn-sm btn-phoenix-secondary fs-10 open-DeleteModal"
                                                                 onclick="handleDelete('{{ station.id }}')"
                                                                 data-bs-toggle="modal" data-bs-target="#verticallyCentered">
                                                            <span class="fas fa-trash"></span>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="btn-reveal-trigger position-static">

                                                    <div class="dropdown-menu dropdown-menu-end py-2">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>




                                    {% endfor %}


                                    </tbody>
                                </table>

                            </div>
                            <div class="row align-items-center py-1">
                                <div class="pagination d-none"></div>

                                <div class="col-auto d-flex">
                                    <button class="btn btn-link px-1 me-1" type="button" title="Previous"
                                            data-list-pagination="prev"><span class="fas fa-chevron-left me-2"></span>Previous
                                    </button>
                                    <button class="btn btn-link px-1 ms-1" type="button" title="Next"
                                            data-list-pagination="next">Next<span
                                                class="fas fa-chevron-right ms-2"></span></button>
                                </div>
                            </div>
                        </div>

                    </div>


                </div>
            </div>
        </div>
        <div id ="alert" >

        </div>

        <div class="modal fade" id="verticallyCentered" tabindex="-1" aria-labelledby="verticallyCenteredModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="verticallyCenteredModalLabel">Confirm Delete</h5><button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close"><span class="fas fa-times fs-9"></span></button>
                    </div>
                    <div class="modal-body">
                        <p class="text-body-tertiary lh-lg mb-0"> Are you sure that you want to delete this item ??? </p>
                    </div>
                    <div class="modal-footer"><button class="btn btn-primary" type="button" onclick="deleteStation()">Okay</button><button class="btn btn-outline-primary" type="button" data-bs-dismiss="modal">Cancel</button></div>
                </div>
            </div>
        </div>





    </div>
    <div class="support-chat-container">
        <div class="container-fluid support-chat">
            <div class="card bg-body-emphasis">
                <div class="card-header d-flex flex-between-center px-4 py-3 border-bottom border-translucent">
                    <h5 class="mb-0 d-flex align-items-center gap-2">Demo widget<span
                                class="fa-solid fa-circle text-success fs-11"></span></h5>
                    <div class="btn-reveal-trigger">
                        <button class="btn btn-link p-0 dropdown-toggle dropdown-caret-none transition-none d-flex"
                                type="button"
                                id="support-chat-dropdown" data-bs-toggle="dropdown" data-boundary="window"
                                aria-haspopup="true"
                                aria-expanded="false" data-bs-reference="parent"><span
                                    class="fas fa-ellipsis-h text-body"></span></button>
                        <div class="dropdown-menu dropdown-menu-end py-2" aria-labelledby="support-chat-dropdown"><a
                                    class="dropdown-item"
                                    href="#!">Request a
                                callback</a><a class="dropdown-item" href="#!">Search in chat</a><a
                                    class="dropdown-item" href="#!">Show
                                history</a><a class="dropdown-item" href="#!">Report to Admin</a><a
                                    class="dropdown-item btn-support-chat"
                                    href="#!">Close Support</a></div>
                    </div>
                </div>
                <div class="card-body chat p-0">
                    <div class="d-flex flex-column-reverse scrollbar h-100 p-3">
                        <div class="text-end mt-6"><a
                                    class="mb-2 d-inline-flex align-items-center text-decoration-none text-body-emphasis bg-body-hover rounded-pill border border-primary py-2 ps-4 pe-3"
                                    href="#!">
                                <p class="mb-0 fw-semibold fs-9">I need help with something</p><span
                                        class="fa-solid fa-paper-plane text-primary fs-9 ms-3"></span>
                            </a><a class="mb-2 d-inline-flex align-items-center text-decoration-none text-body-emphasis bg-body-hover rounded-pill border border-primary py-2 ps-4 pe-3"
                                   href="#!">
                                <p class="mb-0 fw-semibold fs-9">I can’t reorder a product I previously ordered</p><span
                                        class="fa-solid fa-paper-plane text-primary fs-9 ms-3"></span>
                            </a><a class="mb-2 d-inline-flex align-items-center text-decoration-none text-body-emphasis bg-body-hover rounded-pill border border-primary py-2 ps-4 pe-3"
                                   href="#!">
                                <p class="mb-0 fw-semibold fs-9">How do I place an order?</p><span
                                        class="fa-solid fa-paper-plane text-primary fs-9 ms-3"></span>
                            </a><a class="false d-inline-flex align-items-center text-decoration-none text-body-emphasis bg-body-hover rounded-pill border border-primary py-2 ps-4 pe-3"
                                   href="#!">
                                <p class="mb-0 fw-semibold fs-9">My payment method not working</p><span
                                        class="fa-solid fa-paper-plane text-primary fs-9 ms-3"></span>
                            </a></div>
                        <div class="text-center mt-auto">
                            <div class="avatar avatar-3xl status-online"><img
                                        class="rounded-circle border border-3 border-light-subtle"
                                        src="../../../assets/img/team/30.webp" alt=""/></div>
                            <h5 class="mt-2 mb-3">Eric</h5>
                            <p class="text-center text-body-emphasis mb-0">Ask us anything – we’ll get back to you here
                                or by email within 24
                                hours.</p>
                        </div>
                    </div>
                </div>
                <div class="card-footer d-flex align-items-center gap-2 border-top border-translucent ps-3 pe-4 py-3">
                    <div class="d-flex align-items-center flex-1 gap-3 border border-translucent rounded-pill px-4">
                        <input
                                class="form-control outline-none border-0 flex-1 fs-9 px-0" type="text"
                                placeholder="Write message"/><label
                                class="btn btn-link d-flex p-0 text-body-quaternary fs-9 border-0"
                                for="supportChatPhotos"><span
                                    class="fa-solid fa-image"></span></label><input class="d-none" type="file"
                                                                                    accept="image/*"
                                                                                    id="supportChatPhotos"/><label
                                class="btn btn-link d-flex p-0 text-body-quaternary fs-9 border-0"
                                for="supportChatAttachment"> <span
                                    class="fa-solid fa-paperclip"></span></label><input class="d-none" type="file"
                                                                                        id="supportChatAttachment"/>
                    </div>
                    <button class="btn p-0 border-0 send-btn"><span class="fa-solid fa-paper-plane fs-9"></span>
                    </button>
                </div>
            </div>
        </div>

    </div>
    <div class="modal fade" id="updateDealModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="updateDealModal" aria-hidden="true">
        <form id="contact-form" method="POST">

            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content bg-body-highlight p-6">
                    <div class="modal-header border-0 p-0 mb-2">
                        <h3 class="mb-0">New Station</h3>
                        <button class="btn btn-sm btn-phoenix-secondary" data-bs-dismiss="modal" aria-label="Close">
                            <span class="fas fa-times text-danger"></span></button>
                    </div>
                    <div class="modal-body px-0">
                        <div class="row g-4">
                            <div class="col-lg-6">
                                <div class="mb-4"><label class="text-body-highlight fw-bold mb-2">Type Vehicule</label>
                                    <select class="form-select" id="typeSelectUpd">
                                        <option>Metro</option>
                                        <option>Bus</option>
                                    </select>
                                </div>
                                <div class="mb-4">
                                    <label class="text-body-highlight fw-bold mb-2">Real Address</label>
                                    <input class="form-control input-target" type="text" placeholder="Enter deal name"
                                           name="adressStationUpd" id="adressStationUpd"/>
                                </div>
                                <div class="mb-4"><label class=" fw-bold mb-2 error-label" id="error-label"></label>
                                </div>

                                <div>

                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="mb-4"><label class="text-body-highlight fw-bold mb-2" id="">Station
                                        Name</label><input name="nameUpd" id="nameUpd" class="form-control input-target"
                                                           type="text" placeholder="Enter contact name"/></div>
                                <div class="mb-4">
                                    <div class="row g-3">
                                        <div class="col-6"><label class="text-body-highlight fw-bold mb-2">Station
                                                Image</label>
                                            <input name="createinputfileUpd" id="createinputfileUpd" type="file"
                                                   class="form-control input-target  text-body-highlight fw-bold mb-2"/>
                                        </div>

                                    </div>

                                    <div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer border-0 pt-6 px-0 pb-0">
                        <button class="btn text-danger px-3 my-0" data-bs-dismiss="modal" aria-label="Close" id="cancelButton">
                            Cancel
                        </button>
                        <button class="btn btn-primary my-0" type="submit" onclick="updateStation(event)">
                            Update Station
                        </button>
                    </div>

                </div>
            </div>
        </form>
    </div>

    <div class="modal fade" id="addDealModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="addDealModal" aria-hidden="true">
        <form id="contact-form" method="POST">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content bg-body-highlight p-6">
                    <div class="modal-header border-0 p-0 mb-2">
                        <h3 class="mb-0">New Station</h3>
                        <button class="btn btn-sm btn-phoenix-secondary" data-bs-dismiss="modal" aria-label="Close">
                            <span class="fas fa-times text-danger"></span>
                        </button>
                    </div>
                    <div class="modal-body px-0">
                        <div class="row g-4">
                            <div class="col-lg-6">
                                <div class="mb-4">
                                    <label class="text-body-highlight fw-bold mb-2">Type Vehicle</label>
                                    <select class="form-select" id="typeSelect">
                                        <option>Metro</option>
                                        <option>Bus</option>
                                    </select>
                                </div>
                                <div class="mb-4">
                                    <label class="text-body-highlight fw-bold mb-2">Real Address</label>
                                    <input class="form-control input-Address" type="text" placeholder="Enter deal name"
                                           name="adressStation" id="adressStation" readonly/>
                                </div>
                                <div class="mb-4"><label class=" fw-bold mb-2 error-label" id="error-label"></label>
                                </div>

                            </div>
                            <div class="col-lg-6">
                                <div class="mb-4">
                                    <label class="text-body-highlight fw-bold mb-2" id="">Station Name</label>
                                    <input name="name" id="name" class="form-control input-target" type="text"
                                           placeholder="Enter contact name"/>
                                </div>
                                <div class="mb-4">
                                    <div class="row g-3">
                                        <div class="col-6">
                                            <label class="text-body-highlight fw-bold mb-2">Station Image</label>
                                            <input name="createinputfile" id="createinputfile" type="file"
                                                   class="form-control input-target  text-body-highlight fw-bold mb-2"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer border-0 pt-6 px-0 pb-0">
                        <button class="btn  text-danger px-3 my-0" data-bs-dismiss="modal" aria-label="Close"  id="cancelButton1">
                            Cancel
                        </button>
                        <button class="btn btn-primary my-0" type="submit" onclick="addStation(event)">Create Deal
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>





    <script>   </script>

{% endblock %}


{% block js %}

    <script src="{{ asset('js/StationScript.js') }}"></script>

{% endblock %}